plugins {
    id 'java'
    id 'com.diffplug.gradle.spotless' version '3.24.0'
    id 'idea'
}

repositories {
    mavenCentral()
}

spotless {
    java {
        googleJavaFormat('1.7')
    }
}

idea {
    module {
        outputDir file('build/classes/main')
        testOutputDir file('build/classes/test')
    }
}

ext {
    lombokVersion = '1.18.6'
    hibernateVersion = '5.4.2.Final'
}

dependencies {
    // lombok
    compileOnly "org.projectlombok:lombok:$lombokVersion"
    annotationProcessor "org.projectlombok:lombok:$lombokVersion"

    // hibernate
    compile "org.hibernate:hibernate-core:$hibernateVersion"
    annotationProcessor "org.hibernate:hibernate-jpamodelgen:$hibernateVersion"

    compile 'org.postgresql:postgresql:42.2.5'
}

tasks.withType(JavaCompile) {
    options.annotationProcessorGeneratedSourcesDirectory = file("src/generated/java")
}

compileJava.options.compilerArgs += [
]

sourceSets {
    generated {
        java {
            srcDirs = ['src/generated/java']
        }
    }
}
